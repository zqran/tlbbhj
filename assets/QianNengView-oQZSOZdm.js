import{r as C,o as he,n as de,a as Ue,w as _e,b as Ie,c as Te,u as Re,d as e,e as T,f as w,g as fe,t as W,h as R,i as le,j as Ne,k as Me,l as pe,m as ee,p as Ee,B as D,q as Ae,s as ge,v as ve,x as De,y as be,z as Ve,A as Oe,C as Ze,D as Qe,E as He,F as ae,G as Ke,H as ze,P as Be,I as re,J as je,K as Ge,L as Ye,M as Je,N as X,O as m,Q as te,R as ne,S as $,T as Q,U as se,_ as qe,V as Fe,W as U,X as s,Y as F,Z as Xe,$ as we,a0 as O,a1 as Pe,a2 as oe,a3 as ue,a4 as Ce,a5 as We,a6 as Z,a7 as ea,a8 as g,a9 as aa,aa as la}from"./index-2Jt8PQR0.js";const ta=(a,n)=>{const r=C(),l=()=>{r.value=Re(a).height};return he(()=>{if(de(l),n)for(let t=1;t<=3;t++)setTimeout(l,100*t)}),Ue(()=>de(l)),_e([Ie,Te],l),r};function na(a,n){const r=ta(a,!0);return l=>e("div",{class:n("placeholder"),style:{height:r.value?`${r.value}px`:void 0}},[l()])}const[Le,ce]=T("action-bar"),Se=Symbol(Le),sa={placeholder:Boolean,safeAreaInsetBottom:W};var oa=w({name:Le,props:sa,setup(a,{slots:n}){const r=C(),l=na(r,ce),{linkChildren:t}=fe(Se);t();const o=()=>{var i;return e("div",{ref:r,class:[ce(),{"van-safe-area-bottom":a.safeAreaInsetBottom}]},[(i=n.default)==null?void 0:i.call(n)])};return()=>a.placeholder?l(o):o()}});const ua=R(oa),[ia,da]=T("action-bar-button"),ra=le({},Ne,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ca=w({name:ia,props:ra,setup(a,{slots:n}){const r=Me(),{parent:l,index:t}=pe(Se),o=ee(()=>{if(l){const h=l.children[t.value-1];return!(h&&"isButton"in h)}}),i=ee(()=>{if(l){const h=l.children[t.value+1];return!(h&&"isButton"in h)}});return Ee({isButton:!0}),()=>{const{type:h,icon:x,text:c,color:_,loading:u,disabled:P}=a;return e(D,{class:da([h,{last:i.value,first:o.value}]),size:"large",type:h,icon:x,color:_,loading:u,disabled:P,onClick:r},{default:()=>[n.default?n.default():c]})}}});const xe=R(ca),[ye,xa]=T("radio-group"),ma={shape:String,disabled:Boolean,iconSize:ge,direction:String,modelValue:ve,checkedColor:String},ke=Symbol(ye);var ha=w({name:ye,props:ma,emits:["change","update:modelValue"],setup(a,{emit:n,slots:r}){const{linkChildren:l}=fe(ke),t=o=>n("update:modelValue",o);return _e(()=>a.modelValue,o=>n("change",o)),l({props:a,updateValue:t}),Ae(()=>a.modelValue),()=>{var o;return e("div",{class:xa([a.direction]),role:"radiogroup"},[(o=r.default)==null?void 0:o.call(r)])}}});const _a=R(ha),fa=le({},De,{shape:String}),[pa,ga]=T("radio");var va=w({name:pa,props:fa,emits:["update:modelValue"],setup(a,{emit:n,slots:r}){const{parent:l}=pe(ke),t=()=>(l?l.props.modelValue:a.modelValue)===a.name,o=()=>{l?l.updateValue(a.name):n("update:modelValue",a.name)};return()=>e(Oe,Ve({bem:ga,role:"radio",parent:l,checked:t(),onToggle:o},a),be(r,["default","icon"]))}});const ba=R(va),[Va,B,E]=T("dialog"),Ba=le({},Ze,{title:String,theme:String,width:ge,message:[String,Function],callback:Function,allowHtml:Boolean,className:ve,transition:Qe("van-dialog-bounce"),messageAlign:String,closeOnPopstate:W,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:W,closeOnClickOverlay:Boolean}),Fa=[...He,"transition","closeOnPopstate"];var Xa=w({name:Va,props:Ba,emits:["confirm","cancel","keydown","update:show"],setup(a,{emit:n,slots:r}){const l=C(),t=ae({confirm:!1,cancel:!1}),o=d=>n("update:show",d),i=d=>{var f;o(!1),(f=a.callback)==null||f.call(a,d)},h=d=>()=>{a.show&&(n(d),a.beforeClose?(t[d]=!0,Je(a.beforeClose,{args:[d],done(){i(d),t[d]=!1},canceled(){t[d]=!1}})):i(d))},x=h("cancel"),c=h("confirm"),_=Ke(d=>{var f,v;if(d.target!==((v=(f=l.value)==null?void 0:f.popupRef)==null?void 0:v.value))return;({Enter:a.showConfirmButton?c:re,Escape:a.showCancelButton?x:re})[d.key](),n("keydown",d)},["enter","esc"]),u=()=>{const d=r.title?r.title():a.title;if(d)return e("div",{class:B("header",{isolated:!a.message&&!r.default})},[d])},P=d=>{const{message:f,allowHtml:v,messageAlign:b}=a,L=B("message",{"has-title":d,[b]:b}),k=je(f)?f():f;return v&&typeof k=="string"?e("div",{class:L,innerHTML:k},null):e("div",{class:L},[k])},S=()=>{if(r.default)return e("div",{class:B("content")},[r.default()]);const{title:d,message:f,allowHtml:v}=a;if(f){const b=!!(d||r.title);return e("div",{key:v?1:0,class:B("content",{isolated:!b})},[P(b)])}},p=()=>e("div",{class:[Ye,B("footer")]},[a.showCancelButton&&e(D,{size:"large",text:a.cancelButtonText||E("cancel"),class:B("cancel"),style:{color:a.cancelButtonColor},loading:t.cancel,disabled:a.cancelButtonDisabled,onClick:x},null),a.showConfirmButton&&e(D,{size:"large",text:a.confirmButtonText||E("confirm"),class:[B("confirm"),{[Ge]:a.showCancelButton}],style:{color:a.confirmButtonColor},loading:t.confirm,disabled:a.confirmButtonDisabled,onClick:c},null)]),I=()=>e(ua,{class:B("footer")},{default:()=>[a.showCancelButton&&e(xe,{type:"warning",text:a.cancelButtonText||E("cancel"),class:B("cancel"),color:a.cancelButtonColor,loading:t.cancel,disabled:a.cancelButtonDisabled,onClick:x},null),a.showConfirmButton&&e(xe,{type:"danger",text:a.confirmButtonText||E("confirm"),class:B("confirm"),color:a.confirmButtonColor,loading:t.confirm,disabled:a.confirmButtonDisabled,onClick:c},null)]}),y=()=>r.footer?r.footer():a.theme==="round-button"?I():p();return()=>{const{width:d,title:f,theme:v,message:b,className:L}=a;return e(Be,Ve({ref:l,role:"dialog",class:[B([v]),L],style:{width:ze(d)},tabindex:0,"aria-labelledby":f||b,onKeydown:_,"onUpdate:show":o},be(a,Fa)),{default:()=>[u(),S(),y()]})}}});const wa=R(Xa),$e=a=>(te("data-v-ee05f7c2"),a=a(),ne(),a),Pa={class:"result-explain"},Ca=$e(()=>X("h3",{class:"result-title"},"转换说明",-1)),La=$e(()=>X("div",{class:"explain-item"},[m(" 1. 由于"),X("span",{class:"danger"},"数据精度"),m("问题，转换结果存在误差（"),X("span",{class:"danger"},"差值为：1"),m("）。 ")],-1)),Sa={class:"image-wrap"},ya=["src"],ka=w({__name:"ResultExplain",setup(a){return(n,r)=>{const l=Fe;return $(),Q("div",Pa,[Ca,La,e(l),X("div",Sa,[m("问题反馈/交流群："),X("img",{class:"wx",src:se(qe),alt:"交流群"},null,8,ya)])])}}}),$a=U(ka,[["__scopeId","data-v-ee05f7c2"]]),Ua=a=>(te("data-v-464cb1cf"),a=a(),ne(),a),Ia={class:"result-panel"},Ta=Ua(()=>X("h3",{class:"result-title"},"转换结果",-1)),Ra=w({__name:"QnResultField",props:{result:{}},setup(a){return(n,r)=>{const l=Xe,t=we,o=Fe;return $(),Q("div",Ia,[Ta,e(t,{class:"bold"},{default:s(()=>[e(l,{span:"4"},{default:s(()=>[m("血量：")]),_:1}),e(l,{span:"20"},{default:s(()=>[m(F(n.result.xue),1)]),_:1})]),_:1}),e(o,{class:"thin-divider"}),e(t,null,{default:s(()=>[e(l,{span:"8"},{default:s(()=>[e(t,null,{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("体力：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.tiLi),1)]),_:1})]),_:1})]),_:1}),e(l,{span:"16"},{default:s(()=>[e(t,null,{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("修炼加的体力：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.tiLiXl),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{class:"thin-divider"}),e(t,null,{default:s(()=>[e(l,{span:"8"},{default:s(()=>[e(t,null,{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("身法：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.shenFa),1)]),_:1})]),_:1})]),_:1}),e(l,{span:"16"},{default:s(()=>[e(t,null,{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("修炼加的身法：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.shenFaXl),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{class:"thin-divider"}),e(t,null,{default:s(()=>[e(l,{span:"8"},{default:s(()=>[e(t,{class:"bold"},{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("命中：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.mingZhong),1)]),_:1})]),_:1})]),_:1}),e(l,{span:"16"},{default:s(()=>[e(t,{class:"bold"},{default:s(()=>[e(l,{span:"6"},{default:s(()=>[m("闪避：")]),_:1}),e(l,{span:"18"},{default:s(()=>[m(F(n.result.shanBi),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(o,{class:"thin-divider"}),e(t,null,{default:s(()=>[e(l,{span:"8"},{default:s(()=>[e(t,{class:"bold"},{default:s(()=>[e(l,{span:"12"},{default:s(()=>[m("会心：")]),_:1}),e(l,{span:"12"},{default:s(()=>[m(F(n.result.huiXin),1)]),_:1})]),_:1})]),_:1}),e(l,{span:"16"},{default:s(()=>[e(t,{class:"bold"},{default:s(()=>[e(l,{span:"6"},{default:s(()=>[m("会防：")]),_:1}),e(l,{span:"18"},{default:s(()=>[m(F(n.result.huiFang),1)]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Na=U(Ra,[["__scopeId","data-v-464cb1cf"]]),Ma=w({__name:"TargetQnField",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const n=O(a,"modelValue");return(r,l)=>{const t=ba,o=_a,i=oe,h=ue;return $(),Pe(h,{class:"convert",inset:""},{default:s(()=>[e(i,{name:"targetQn",label:"转为"},{input:s(()=>[e(o,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=x=>n.value=x),direction:"horizontal"},{default:s(()=>[e(t,{name:"tiLi"},{default:s(()=>[m("体力点")]),_:1}),e(t,{name:"shenFa"},{default:s(()=>[m("身法点")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Ea=U(Ma,[["__scopeId","data-v-38f2df81"]]),Aa="/tlbbhj/assets/xl-PQkTC18b.png",Da=["src"],Oa=w({__name:"BasicPropsField",props:{modelValue:{default:{xue:"",tiLi:"",tiLiXl:"",tiLiXlPercent:"",shenFa:"",shenFaXl:"",shenFaXlPercent:"",mingZhong:"",shanBi:"",huiXin:"",huiFang:""}},modelModifiers:{}},emits:["update:modelValue"],setup(a){const n=O(a,"modelValue"),r=C(!1);return(l,t)=>{const o=oe,i=Xe,h=we,x=We,c=ue,_=wa;return $(),Q(Ce,null,[e(c,{inset:""},{default:s(()=>[e(o,{modelValue:n.value.xue,"onUpdate:modelValue":t[0]||(t[0]=u=>n.value.xue=u),name:"xue",label:"血量",placeholder:"0"},null,8,["modelValue"]),e(h,null,{default:s(()=>[e(i,{span:"8"},{default:s(()=>[e(o,{modelValue:n.value.tiLi,"onUpdate:modelValue":t[1]||(t[1]=u=>n.value.tiLi=u),name:"tiLi",label:"体力",placeholder:"0"},null,8,["modelValue"])]),_:1}),e(i,{span:"16"},{default:s(()=>[e(o,{class:"long-label-2 xl",modelValue:n.value.tiLiXl,"onUpdate:modelValue":t[2]||(t[2]=u=>n.value.tiLiXl=u),name:"tiLiXl",label:"修炼增加的体力",placeholder:"0"},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{class:"pt-0"},{default:s(()=>[e(i,{span:"16"},{default:s(()=>[e(o,{class:"long-label-4",modelValue:n.value.tiLiXlPercent,"onUpdate:modelValue":t[3]||(t[3]=u=>n.value.tiLiXlPercent=u),name:"tiLiXlPpercent",label:"修炼提升的体力百分比",placeholder:"0"},{button:s(()=>[m("%")]),_:1},8,["modelValue"])]),_:1}),e(i,{span:"8",class:"pt-5"},{default:s(()=>[e(x,{class:"pointer",name:"warning-o",onClick:t[4]||(t[4]=u=>r.value=!0)})]),_:1})]),_:1}),e(h,null,{default:s(()=>[e(i,{span:"8"},{default:s(()=>[e(o,{modelValue:n.value.shenFa,"onUpdate:modelValue":t[5]||(t[5]=u=>n.value.shenFa=u),name:"shenFa",label:"身法",placeholder:"0"},null,8,["modelValue"])]),_:1}),e(i,{span:"16"},{default:s(()=>[e(o,{class:"long-label-2 xl",modelValue:n.value.shenFaXl,"onUpdate:modelValue":t[6]||(t[6]=u=>n.value.shenFaXl=u),name:"shenFaXl",label:"修炼增加的身法",placeholder:"0"},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{class:"pt-0"},{default:s(()=>[e(i,{span:"16"},{default:s(()=>[e(o,{class:"long-label-4",modelValue:n.value.shenFaXlPercent,"onUpdate:modelValue":t[7]||(t[7]=u=>n.value.shenFaXlPercent=u),name:"shenFaXlPercent",label:"修炼提升的身法百分比",placeholder:"0"},{button:s(()=>[m("%")]),_:1},8,["modelValue"])]),_:1}),e(i,{span:"8",class:"pt-5"},{default:s(()=>[e(x,{class:"pointer",name:"warning-o",onClick:t[8]||(t[8]=u=>r.value=!0)})]),_:1})]),_:1}),e(h,null,{default:s(()=>[e(i,{span:"8"},{default:s(()=>[e(o,{modelValue:n.value.mingZhong,"onUpdate:modelValue":t[9]||(t[9]=u=>n.value.mingZhong=u),name:"mingZhong",label:"命中",placeholder:"0"},null,8,["modelValue"])]),_:1}),e(i,{span:"16"},{default:s(()=>[e(o,{modelValue:n.value.shanBi,"onUpdate:modelValue":t[10]||(t[10]=u=>n.value.shanBi=u),name:"shanBi",label:"闪避",placeholder:"0"},null,8,["modelValue"])]),_:1})]),_:1}),e(h,null,{default:s(()=>[e(i,{span:"8"},{default:s(()=>[e(o,{modelValue:n.value.huiXin,"onUpdate:modelValue":t[11]||(t[11]=u=>n.value.huiXin=u),name:"huiXin",label:"会心",placeholder:"0"},null,8,["modelValue"])]),_:1}),e(i,{span:"16"},{default:s(()=>[e(o,{modelValue:n.value.huiFang,"onUpdate:modelValue":t[12]||(t[12]=u=>n.value.huiFang=u),name:"huiFang",label:"会防",placeholder:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{show:r.value,"onUpdate:show":t[13]||(t[13]=u=>r.value=u),"confirm-button-text":"关闭"},{default:s(()=>[X("img",{src:se(Aa),alt:"修炼"},null,8,Da)]),_:1},8,["show"])],64)}}}),Za=U(Oa,[["__scopeId","data-v-9fe0dc90"]]),Qa=w({__name:"SectLevelField",props:{sect:{default:Z[0]},sectModifiers:{},level:{default:""},levelModifiers:{}},emits:["update:sect","update:level"],setup(a){const n=O(a,"sect"),r=O(a,"level"),l=C(!1),t=({selectedOptions:o})=>{const i=o[0];i&&(n.value={text:i.text,value:i.value,hasAttr:i.hasAttr,attr:i.attr},l.value=!1)};return(o,i)=>{const h=oe,x=ea,c=Be,_=ue;return $(),Pe(_,{inset:""},{default:s(()=>[e(h,{class:"hidden",name:"sect",type:"hidden",modelValue:n.value.value,"onUpdate:modelValue":i[0]||(i[0]=u=>n.value.value=u)},null,8,["modelValue"]),e(h,{modelValue:n.value.text,"onUpdate:modelValue":i[1]||(i[1]=u=>n.value.text=u),"is-link":"",readonly:"",label:"门派",onClick:i[2]||(i[2]=u=>l.value=!0)},null,8,["modelValue"]),e(c,{show:l.value,"onUpdate:show":i[4]||(i[4]=u=>l.value=u),position:"bottom"},{default:s(()=>[e(x,{columns:se(Z),onCancel:i[3]||(i[3]=u=>l.value=!1),onConfirm:t},null,8,["columns"])]),_:1},8,["show"]),e(h,{modelValue:r.value,"onUpdate:modelValue":i[5]||(i[5]=u=>r.value=u),name:"level",label:"等级",placeholder:"0"},null,8,["modelValue"])]),_:1})}}}),Ha=U(Qa,[["__scopeId","data-v-3bb32d19"]]),q=a=>a<30?0:a>=30&&a<40?1:a>=40&&a<50?2:3,Ka={88:30+3*30+3*9,89:30+3*40,119:30+3*70},za=a=>{const n=Ka[a];return n||(a<30?0:a>=30&&a<40?(a+1-30)*q(a):a>=40&&a<50?(a+1-40)*q(a)+10:(a+1-50)*q(a)+10+20)},A=(a,n,r,l)=>{const t=a*(l==="increase"?1:-1);return Math.round((n/r+t)*r)},ja=a=>(te("data-v-74768170"),a=a(),ne(),a),Ga=ja(()=>X("h1",{class:"title"},"怀旧天龙体力身法转换器-测试版",-1)),Ya={style:{margin:"16px"}},Ja={class:"target-text"},me="__tlbbhj!qn__",qa=w({__name:"QianNengView",setup(a){he(()=>{const x=localStorage.getItem(me);if(!x)return;const c=JSON.parse(x);if("sect"in c){if(c.sect){const _=Z.find(u=>u.value===c.sect);if(!_)return;n.value=_}r.value=c.level,l.xue=c.xue,l.tiLi=c.tiLi,l.tiLiXl=c.tiLiXl,l.tiLiXlPercent=c.tiLiXlPpercent,l.shenFa=c.shenFa,l.shenFaXl=c.shenFaXl,l.shenFaXlPercent=c.shenFaXlPercent,l.mingZhong=c.mingZhong,l.shanBi=c.shanBi,l.huiXin=c.huiXin,l.huiFang=c.huiFang,t.value=c.targetQn}});const n=C(Z[0]),r=C(""),l=ae({xue:"",tiLi:"",tiLiXl:"",tiLiXlPercent:"",shenFa:"",shenFaXl:"",shenFaXlPercent:"",mingZhong:"",shanBi:"",huiXin:"",huiFang:""}),t=C("tiLi"),o=ae({xue:0,tiLi:0,tiLiXl:0,shenFa:0,shenFaXl:0,mingZhong:0,shanBi:0,huiXin:0,huiFang:0}),i=ee(()=>t.value==="tiLi"?{current:"身法点",target:"体力点"}:{current:"体力点",target:"身法点"}),h=x=>{const c=g(x.level),_=g(x.tiLiXl),u=g(x.tiLiXlPpercent)/100,P=g(x.shenFaXl),S=g(x.shenFaXlPercent)/100,p=za(c),I=x.targetQn==="tiLi"?"shenFa":"tiLi",y=g(x.xue),d=aa[x.sect],f=g(x.tiLi),v=g(x.shenFa),b=g(x.mingZhong),L=g(x.shanBi),k=g(x.huiXin),ie=g(x.huiFang);if(I==="shenFa"){const N=A(p,_,u,"increase"),M=A(p,P,S,"decrease"),V=p+P-M,H=y+V*d.xue,K=f+p,z=v-p,j=Math.ceil(b-V*d.mingzhong),G=L-V*d.shanbi,Y=Math.ceil(k-V*d.huixingongji),J=Math.ceil(ie-V*d.huixinfangyu);o.xue=H,o.tiLi=K,o.tiLiXl=N,o.shenFa=z,o.shenFaXl=M,o.mingZhong=j,o.shanBi=G,o.huiXin=Y,o.huiFang=J}else{const N=A(p,_,u,"decrease"),M=A(p,P,S,"increase"),V=p+_-N,H=y-V*d.xue,K=f-p,z=v+p,j=Math.trunc(b+V*d.mingzhong),G=L+V*d.shanbi,Y=Math.ceil(k+V*d.huixingongji),J=Math.ceil(ie+V*d.huixinfangyu);o.xue=H,o.tiLi=K,o.tiLiXl=N,o.shenFa=z,o.shenFaXl=M,o.mingZhong=j,o.shanBi=G,o.huiXin=Y,o.huiFang=J}localStorage.setItem(me,JSON.stringify({...x}))};return(x,c)=>{const _=Ha,u=Za,P=Ea,S=D,p=la,I=Na,y=$a;return $(),Q(Ce,null,[Ga,e(p,{onSubmit:h},{default:s(()=>[e(_,{sect:n.value,"onUpdate:sect":c[0]||(c[0]=d=>n.value=d),level:r.value,"onUpdate:level":c[1]||(c[1]=d=>r.value=d)},null,8,["sect","level"]),e(u,{modelValue:l,"onUpdate:modelValue":c[2]||(c[2]=d=>l=d)},null,8,["modelValue"]),e(P,{modelValue:t.value,"onUpdate:modelValue":c[3]||(c[3]=d=>t.value=d)},null,8,["modelValue"]),X("div",Ya,[e(S,{block:"",type:"success","native-type":"submit"},{default:s(()=>[m(F(i.value.current)+" → 【",1),X("span",Ja,F(i.value.target),1),m("】 ")]),_:1})])]),_:1}),e(I,{result:o},null,8,["result"]),e(y)],64)}}}),el=U(qa,[["__scopeId","data-v-74768170"]]);export{el as default};
